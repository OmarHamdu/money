<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø³Ø§Ø¨Ø§Øª Ø¹Ù…Ø± (Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©)</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f4f7f6;
            --sidebar-bg: linear-gradient(180deg, #2c3e50 0%, #3498db 100%);
            --card-bg: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --radius: 15px;
            --shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-primary);
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* --- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© --- */
        .sidebar {
            width: 260px;
            background: var(--sidebar-bg);
            color: white;
            padding: 20px 0;
            position: fixed;
            height: 100%;
            box-shadow: 4px 0 15px rgba(0,0,0,0.1);
            z-index: 1000;
            overflow-y: auto;
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.6rem;
            font-weight: 700;
            letter-spacing: 1px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 20px;
        }

        .nav-btn {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 14px 25px;
            background: none;
            border: none;
            color: rgba(255,255,255,0.9);
            text-align: right;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            font-family: 'Tajawal', sans-serif;
            border-right: 4px solid transparent;
        }

        .nav-btn:hover, .nav-btn.active {
            background-color: rgba(255,255,255,0.15);
            color: white;
            border-right-color: white;
            padding-right: 30px;
        }

        .nav-btn span { margin-left: 10px; font-size: 1.2rem; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
        .data-controls {
            margin-top: 30px;
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .control-btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Tajawal';
            font-size: 0.9rem;
            text-align: center;
            transition: 0.2s;
        }

        .btn-save { background: #27ae60; color: white; }
        .btn-save:hover { background: #219150; }
        
        .btn-load { background: #e67e22; color: white; }
        .btn-load:hover { background: #d35400; }

        .btn-reset { background: rgba(231, 76, 60, 0.3); color: #ffbaba; margin-top: 20px;}
        .btn-reset:hover { background: #c0392b; color: white; }

        /* --- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
        .main-content {
            margin-right: 260px;
            padding: 40px;
            width: 100%;
            transition: margin 0.3s;
        }

        .page {
            display: none;
            animation: slideUp 0.6s ease-out;
        }

        .page.active { display: block; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: var(--text-primary);
            font-size: 2rem;
            margin-bottom: 30px;
            position: relative;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            right: 0;
            width: 60px;
            height: 4px;
            background: var(--accent-color);
            border-radius: 2px;
        }

        /* --- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª --- */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            transition: transform 0.3s;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.02);
        }

        .card:hover { transform: translateY(-5px); }

        .card h3 { 
            margin-top: 0; 
            font-size: 1.1rem; 
            color: var(--text-secondary); 
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card .amount { 
            font-size: 2.2rem; 
            font-weight: 700; 
            margin-top: 15px; 
            color: var(--text-primary);
        }

        .card.green { border-bottom: 4px solid var(--success-color); }
        .card.green .amount { color: var(--success-color); }
        
        .card.red { border-bottom: 4px solid var(--danger-color); }
        .card.red .amount { color: var(--danger-color); }

        .card.orange { border-bottom: 4px solid var(--warning-color); }
        .card.orange .amount { color: var(--warning-color); }

        .card.blue { border-bottom: 4px solid #3498db; }
        .card.blue .amount { color: #3498db; }

        /* --- Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙˆØ§Ù„Ø¥Ø¯Ø®Ø§Ù„ --- */
        .input-group {
            background: var(--card-bg);
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: flex-end;
            margin-bottom: 30px;
        }

        .form-control { flex: 1; min-width: 200px; }
        
        .form-control label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 600; 
            color: var(--text-primary); 
        }

        .form-control input, .form-control select { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            font-family: 'Tajawal', sans-serif;
            font-size: 1rem;
            background: #fdfdfd;
            box-sizing: border-box;
        }

        .form-control input:focus, .form-control select:focus {
            outline: none;
            border-color: var(--accent-color);
            background: white;
        }

        button.action-btn {
            padding: 12px 30px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Tajawal', sans-serif;
            transition: 0.2s;
            height: 46px;
        }

        button.action-btn:hover { background-color: #2980b9; transform: scale(1.02); }

        /* --- Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ --- */
        .table-container {
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow-x: auto;
        }

        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        
        thead tr { background-color: #f8f9fa; border-bottom: 2px solid #eee; }
        
        th { 
            text-align: right; 
            padding: 15px 20px; 
            color: var(--text-secondary); 
            font-weight: 600; 
        }

        td { 
            padding: 15px 20px; 
            border-bottom: 1px solid #eee; 
            color: var(--text-primary);
        }

        tr:last-child td { border-bottom: none; }
        tr:hover { background-color: #fafafa; }

        .delete-btn {
            background-color: #ffebee;
            color: var(--danger-color);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.2s;
        }

        .delete-btn:hover { background-color: var(--danger-color); color: white; }

        /* --- Ù…ØªØ¬Ø§ÙˆØ¨ (Ù…ÙˆØ¨Ø§ÙŠÙ„) --- */
        @media (max-width: 900px) {
            .sidebar { width: 70px; }
            .sidebar h2 { display: none; }
            .nav-btn span { margin: 0; font-size: 1.5rem; }
            .nav-btn { text-align: center; padding: 20px 0; justify-content: center; }
            .nav-btn::after { content: none; }
            .data-controls { display: none; }
            .main-content { margin-right: 70px; padding: 20px; }
        }

        @media (max-width: 600px) {
            .sidebar { width: 100%; height: auto; position: relative; display: flex; flex-direction: column; padding: 10px 0; }
            .sidebar h2 { display: block; font-size: 1.2rem; margin-bottom: 10px; }
            .data-controls { display: block; border-top: 1px solid rgba(255,255,255,0.2); margin-top: 10px; }
            .nav-btn { text-align: right; padding: 10px 20px; justify-content: flex-start; }
            .main-content { margin-right: 0; padding: 15px; }
            .dashboard-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>ğŸ‘¤ Ø¹Ù…Ø± Ù„Ù„ØªÙ…ÙˆÙŠÙ„</h2>
        <button class="nav-btn active" onclick="showPage('home')"><span>ğŸ </span> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="nav-btn" onclick="showPage('meeza')"><span>ğŸ’³</span> Ù…ÙŠØ²Ø©</button>
        <button class="nav-btn" onclick="showPage('fawry')"><span>âš¡</span> ÙÙˆØ±ÙŠ</button>
        <button class="nav-btn" onclick="showPage('personal')"><span>ğŸ“</span> Ù…ØµØ§Ø±ÙŠÙ</button>
        <button class="nav-btn" onclick="showPage('income')"><span>ğŸ’°</span> Ø§Ù„Ø¯Ø®Ù„</button>
        <button class="nav-btn" onclick="showPage('debts')"><span>ğŸ“‰</span> Ø§Ù„Ù…Ø¯ÙŠÙˆÙ†ÙŠØ©</button>
        <button class="nav-btn" onclick="showPage('credits')"><span>ğŸ“ˆ</span> Ø§Ù„Ø¯Ø§ÙŠÙ†</button>
        <button class="nav-btn" onclick="showPage('summary')"><span>ğŸ“Š</span> Ø§Ù„Ù…Ù„Ø®Øµ</button>
        
        <div class="data-controls">
            <button class="control-btn btn-save" onclick="exportData()">ğŸ’¾ Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø¨ÙŠØ§Ù†Ø§Øª</button>
            <button class="control-btn btn-load" onclick="importData()">ğŸ“‚ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù†Ø³Ø®Ø©</button>
            <button class="control-btn btn-reset" onclick="resetData()">âš  ØªØµÙÙŠØ± ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>
    </div>

    <div class="main-content">

        <div id="home" class="page active">
            <h1>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø¹Ù…Ø± ğŸ‘‹</h1>
            <p style="color: #7f8c8d; margin-bottom: 30px;">Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ ÙˆØ¶Ø¹Ùƒ Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ</p>
            
            <div class="dashboard-grid">
                <div class="card">
                    <h3>Ø±ØµÙŠØ¯ Ù…ÙŠØ²Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ <span>ğŸ’³</span></h3>
                    <div class="amount" id="home-meeza-balance">0 Ø¬.Ù…</div>
                </div>
                <div class="card">
                    <h3>Ø±ØµÙŠØ¯ ÙÙˆØ±ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ <span>âš¡</span></h3>
                    <div class="amount" id="home-fawry-balance">0 Ø¬.Ù…</div>
                </div>
                <div class="card red">
                    <h3>Ø¹Ù„ÙŠÙƒ ÙÙ„ÙˆØ³ (Ù…Ø¯ÙŠÙˆÙ†ÙŠØ©) <span>ğŸ“‰</span></h3>
                    <div class="amount" id="home-debts-total">0 Ø¬.Ù…</div>
                </div>
                <div class="card green">
                    <h3>Ù„ÙŠÙƒ ÙÙ„ÙˆØ³ (Ø¯Ø§ÙŠÙ†) <span>ğŸ“ˆ</span></h3>
                    <div class="amount" id="home-credits-total">0 Ø¬.Ù…</div>
                </div>
            </div>
            
            <div style="background: #e8f6f3; padding: 20px; border-radius: 10px; border: 1px solid #d4efdf; margin-top: 20px;">
                <h3 style="color: #16a085; margin-top: 0;">ğŸ“Œ ÙƒÙŠÙÙŠØ© Ø§Ù„Ù†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© (ÙŠØ¯ÙˆÙŠØ§Ù‹):</h3>
                <ol style="color: #2c3e50;">
                    <li>Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ Ø§Ù„Ù‚Ø¯ÙŠÙ…ØŒ Ø§Ø¶ØºØ· <b>"ğŸ’¾ Ø­ÙØ¸ Ù†Ø³Ø®Ø© Ø¨ÙŠØ§Ù†Ø§Øª"</b>.</li>
                    <li>Ø£Ø±Ø³Ù„ Ø§Ù„Ù…Ù„Ù Ù„Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¬Ø¯ÙŠØ¯.</li>
                    <li>Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¬Ø¯ÙŠØ¯ØŒ Ø§Ø¶ØºØ· <b>"ğŸ“‚ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù†Ø³Ø®Ø©"</b> ÙˆØ§Ø®ØªØ± Ø§Ù„Ù…Ù„Ù.</li>
                </ol>
            </div>
        </div>

        <div id="meeza" class="page">
            <h1>ğŸ’³ Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨ Ù…ÙŠØ²Ø©</h1>
            <div class="dashboard-grid">
                <div class="card green"><h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</h3><div class="amount" id="meeza-in-total">0</div></div>
                <div class="card red"><h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø­Ø¨</h3><div class="amount" id="meeza-out-total">0</div></div>
                <div class="card"><h3>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙÙŠ Ø§Ù„ÙƒØ§Ø±Øª</h3><div class="amount" id="meeza-balance">0</div></div>
            </div>

            <div class="input-group">
                <div class="form-control"><label>Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label><select id="meeza-type"><option value="in">Ø¥ÙŠØ¯Ø§Ø¹ (Ø¯Ø®Ù„ Ù„Ù„ÙƒØ§Ø±Øª)</option><option value="out">Ø´Ø±Ø§Ø¡/Ø³Ø­Ø¨ (Ø®Ø±Ø¬ Ù…Ù† Ø§Ù„ÙƒØ§Ø±Øª)</option></select></div>
                <div class="form-control"><label>Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…)</label><input type="number" id="meeza-amount" placeholder="Ù…Ø«Ø§Ù„: 500"></div>
                <div class="form-control"><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input type="date" id="meeza-date"></div>
                <div class="form-control"><label>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label><input type="text" id="meeza-desc" placeholder="Ù…Ø«Ø§Ù„: ØªØ­ÙˆÙŠÙ„ Ø±Ø§ØªØ¨ / Ù…Ø´ØªØ±ÙŠØ§Øª"></div>
                <button class="action-btn" onclick="addTransaction('meeza')">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</button>
            </div>
            <div class="table-container"><table><thead><tr><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„ØªÙØ§ØµÙŠÙ„</th><th>Ø­Ø°Ù</th></tr></thead><tbody id="meeza-table"></tbody></table></div>
        </div>

        <div id="fawry" class="page">
            <h1>âš¡ Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø§ÙƒÙŠÙ†Ø© ÙÙˆØ±ÙŠ</h1>
            <div class="dashboard-grid">
                <div class="card green"><h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø­Ù†</h3><div class="amount" id="fawry-in-total">0</div></div>
                <div class="card red"><h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</h3><div class="amount" id="fawry-out-total">0</div></div>
                <div class="card"><h3>Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø§ÙƒÙŠÙ†Ø©</h3><div class="amount" id="fawry-balance">0</div></div>
            </div>
            <div class="input-group">
                <div class="form-control"><label>Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label><select id="fawry-type"><option value="in">Ø¥Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯ (Ø´Ø­Ù†)</option><option value="out">Ø¹Ù…Ù„ÙŠØ© Ø¯ÙØ¹ (Ø³Ø­Ø¨)</option></select></div>
                <div class="form-control"><label>Ø§Ù„Ù…Ø¨Ù„Øº</label><input type="number" id="fawry-amount" placeholder="0"></div>
                <div class="form-control"><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input type="date" id="fawry-date"></div>
                <div class="form-control"><label>ØªÙØ§ØµÙŠÙ„</label><input type="text" id="fawry-desc" placeholder="Ù…Ø«Ø§Ù„: Ø´Ø­Ù† Ø±ØµÙŠØ¯ / Ø¯ÙØ¹ ÙØ§ØªÙˆØ±Ø©"></div>
                <button class="action-btn" onclick="addTransaction('fawry')">Ø­ÙØ¸</button>
            </div>
            <div class="table-container"><table><thead><tr><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„ØªÙØ§ØµÙŠÙ„</th><th>Ø­Ø°Ù</th></tr></thead><tbody id="fawry-table"></tbody></table></div>
        </div>

        <div id="personal" class="page">
            <h1>ğŸ“ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª (Ø¬Ø§Ù…Ø¹Ø© ÙˆØ´Ø®ØµÙŠ)</h1>
            <div class="dashboard-grid"><div class="card red"><h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø§ ØµØ±ÙØªÙ‡</h3><div class="amount" id="personal-total">0</div></div></div>
            <div class="input-group">
                <div class="form-control"><label>Ø§Ù„Ù…Ø¨Ù„Øº</label><input type="number" id="personal-amount" placeholder="0"></div>
                <div class="form-control"><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input type="date" id="personal-date"></div>
                <div class="form-control"><label>ÙÙŠÙ…Ø§ ØµØ±ÙØªØŸ</label><input type="text" id="personal-desc" placeholder="Ù…Ø«Ø§Ù„: ÙƒØªØ¨ / Ù…ÙˆØ§ØµÙ„Ø§Øª"></div>
                <button class="action-btn" onclick="addTransaction('personal')">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ</button>
            </div>
            <div class="table-container"><table><thead><tr><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„ØªÙØ§ØµÙŠÙ„</th><th>Ø­Ø°Ù</th></tr></thead><tbody id="personal-table"></tbody></table></div>
        </div>

        <div id="income" class="page">
            <h1>ğŸ’° Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ</h1>
            <div class="dashboard-grid"><div class="card green"><h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„</h3><div class="amount" id="income-total">0</div></div></div>
            <div class="input-group">
                <div class="form-control"><label>Ø§Ù„Ù…Ø¨Ù„Øº</label><input type="number" id="income-amount" placeholder="0"></div>
                <div class="form-control"><label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input type="date" id="income-date"></div>
                <div class="form-control"><label>Ø§Ù„Ù…ØµØ¯Ø±</label><input type="text" id="income-desc" placeholder="Ù…Ø«Ø§Ù„: Ø±Ø§ØªØ¨ / Ù…ÙƒØ§ÙØ£Ø©"></div>
                <button class="action-btn" onclick="addTransaction('income')">Ø¥Ø¶Ø§ÙØ© Ø¯Ø®Ù„</button>
            </div>
            <div class="table-container"><table><thead><tr><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ù…ØµØ¯Ø±</th><th>Ø­Ø°Ù</th></tr></thead><tbody id="income-table"></tbody></table></div>
        </div>

        <div id="debts" class="page">
            <h1>ğŸ“‰ Ø§Ù„Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© (ÙÙ„ÙˆØ³ Ø¹Ù„ÙŠÙƒ)</h1>
            <div class="dashboard-grid"><div class="card red"><h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙŠÙˆÙ†</h3><div class="amount" id="debts-total">0</div></div></div>
            <div class="input-group">
                <div class="form-control"><label>Ø§Ù„Ù…Ø¨Ù„Øº</label><input type="number" id="debts-amount" placeholder="0"></div>
                <div class="form-control"><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù</label><input type="date" id="debts-date"></div>
                <div class="form-control"><label>Ø§Ø³Ù… Ø§Ù„Ø¯Ø§Ø¦Ù†</label><input type="text" id="debts-desc" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯"></div>
                <button class="action-btn" onclick="addTransaction('debts')">ØªØ³Ø¬ÙŠÙ„ Ø¯ÙŠÙ†</button>
            </div>
            <div class="table-container"><table><thead><tr><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø´Ø®Øµ/Ø§Ù„Ø¬Ù‡Ø©</th><th>Ø­Ø°Ù (ØªÙ… Ø§Ù„Ø³Ø¯Ø§Ø¯)</th></tr></thead><tbody id="debts-table"></tbody></table></div>
        </div>

        <div id="credits" class="page">
            <h1>ğŸ“ˆ Ø§Ù„Ø¯Ø§ÙŠÙ† (ÙÙ„ÙˆØ³ Ù„ÙŠÙƒ)</h1>
            <div class="dashboard-grid"><div class="card green"><h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª</h3><div class="amount" id="credits-total">0</div></div></div>
            <div class="input-group">
                <div class="form-control"><label>Ø§Ù„Ù…Ø¨Ù„Øº</label><input type="number" id="credits-amount" placeholder="0"></div>
                <div class="form-control"><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚</label><input type="date" id="credits-date"></div>
                <div class="form-control"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†</label><input type="text" id="credits-desc" placeholder="Ù…Ø«Ø§Ù„: ØµØ¯ÙŠÙ‚"></div>
                <button class="action-btn" onclick="addTransaction('credits')">ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ­Ù‚</button>
            </div>
            <div class="table-container"><table><thead><tr><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ</th><th>Ø­Ø°Ù (ØªÙ… Ø§Ù„ØªØ­ØµÙŠÙ„)</th></tr></thead><tbody id="credits-table"></tbody></table></div>
        </div>

        <div id="summary" class="page">
            <h1>ğŸ“Š Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„</h1>
            
            <h3 style="margin-top: 30px; color: var(--accent-color);">ğŸ”¹ Ù…ÙˆÙ‚Ù Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ø®ØµÙŠ</h3>
            <div class="dashboard-grid">
                <div class="card green">
                    <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„</h3>
                    <div class="amount" id="sum-income">0</div>
                </div>
                <div class="card red">
                    <h3>Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</h3>
                    <div class="amount" id="sum-personal">0</div>
                </div>
                <div class="card blue">
                    <h3>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù…Ù† Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø­Ø±</h3>
                    <div class="amount" id="net-income-personal">0</div>
                    <small style="color: #7f8c8d;">(Ø§Ù„Ø¯Ø®Ù„ - Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª) ÙÙ‚Ø·</small>
                </div>
            </div>

            <h3 style="margin-top: 30px; border-right: 5px solid var(--accent-color); padding-right: 10px;">ğŸ”¸ Ø£Ø±ØµØ¯Ø© Ø§Ù„Ø¹Ù…Ù„ (Ù…ÙŠØ²Ø© ÙˆÙÙˆØ±ÙŠ)</h3>
            <div class="dashboard-grid">
                <div class="card"><h3>Ø±ØµÙŠØ¯ Ù…ÙŠØ²Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ</h3><div class="amount" id="sum-meeza-balance">0</div></div>
                <div class="card"><h3>Ø±ØµÙŠØ¯ ÙÙˆØ±ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ</h3><div class="amount" id="sum-fawry-balance">0</div></div>
            </div>
            
            <h3 style="margin-top: 30px; border-right: 5px solid var(--danger-color); padding-right: 10px;">ğŸ”¸ Ø§Ù„Ø¯ÙŠÙˆÙ† ÙˆØ§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª</h3>
            <div class="dashboard-grid">
                <div class="card red"><h3>Ø¯ÙŠÙˆÙ† Ø¹Ù„ÙŠÙƒ</h3><div class="amount" id="sum-debts">0</div></div>
                <div class="card green"><h3>ÙÙ„ÙˆØ³ Ù„ÙŠÙƒ</h3><div class="amount" id="sum-credits">0</div></div>
            </div>
        </div>

    </div>

    <script>
        let appData = { meeza: [], fawry: [], personal: [], income: [], debts: [], credits: [] };

        window.onload = function() {
            if(localStorage.getItem('omarFinancePro')) {
                let savedData = JSON.parse(localStorage.getItem('omarFinancePro'));
                appData = { ...appData, ...savedData };
            }
            updateAllViews();
        };

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            let activeBtn = Array.from(document.querySelectorAll('.nav-btn')).find(btn => btn.getAttribute('onclick').includes(pageId));
            if(activeBtn) activeBtn.classList.add('active');
            updateAllViews();
        }

        function addTransaction(category) {
            let amountInput = document.getElementById(`${category}-amount`);
            let descInput = document.getElementById(`${category}-desc`);
            let dateInput = document.getElementById(`${category}-date`);
            let typeInput = document.getElementById(`${category}-type`); 

            let amount = parseFloat(amountInput.value);
            let desc = descInput.value;
            let type = typeInput ? typeInput.value : 'single';
            
            let displayDate = dateInput.value ? new Date(dateInput.value).toLocaleDateString('ar-EG') : new Date().toLocaleDateString('ar-EG');

            if (isNaN(amount) || amount <= 0 || desc.trim() === "") {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¨Ù„Øº ÙˆØ§Ù„ÙˆØµÙ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
                return;
            }

            appData[category].push({ id: Date.now(), amount: amount, desc: desc, type: type, date: displayDate });
            saveData();
            updateAllViews();
            
            amountInput.value = ''; descInput.value = ''; dateInput.value = '';
        }

        function deleteTransaction(category, id) {
            if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ')) {
                appData[category] = appData[category].filter(item => item.id !== id);
                saveData();
                updateAllViews();
            }
        }

        function saveData() {
            localStorage.setItem('omarFinancePro', JSON.stringify(appData));
        }

        // --- Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙˆØ§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ---
        function exportData() {
            const dataStr = JSON.stringify(appData);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const exportFileDefaultName = 'omar_finance_backup.json';

            let linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        function importData() {
            let input = document.createElement('input');
            input.type = 'file';
            input.onchange = e => {
                let file = e.target.files[0];
                let reader = new FileReader();
                reader.readAsText(file,'UTF-8');
                reader.onload = readerEvent => {
                    try {
                        let content = readerEvent.target.result;
                        let parsedData = JSON.parse(content);
                        if(confirm('Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù…Ù„Ù. Ù‡Ù„ Ø£Ù†Øª Ù…ÙˆØ§ÙÙ‚ØŸ')) {
                            localStorage.setItem('omarFinancePro', JSON.stringify(parsedData));
                            location.reload();
                        }
                    } catch (error) {
                        alert('Ø­Ø¯Ø« Ø®Ø·Ø£! Ø§Ù„Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ ØªØ§Ù„Ù.');
                    }
                }
            }
            input.click();
        }

        function resetData() {
            if(confirm('âš  ØªØ­Ø°ÙŠØ± Ù‡Ø§Ù…: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø§Ù„ØµÙØ±ØŸ')) {
                localStorage.removeItem('omarFinancePro');
                location.reload();
            }
        }
        // ----------------------------------------

        function updateAllViews() {
            updateCategoryView('meeza');
            updateCategoryView('fawry');
            updateSimpleView('personal');
            updateSimpleView('income');
            updateSimpleView('debts');    
            updateSimpleView('credits');  
            updateSummary();
        }

        function updateCategoryView(cat) {
            let totalIn = 0, totalOut = 0;
            let tbody = document.getElementById(`${cat}-table`);
            tbody.innerHTML = '';
            [...appData[cat]].reverse().forEach(item => {
                if (item.type === 'in') totalIn += item.amount; else totalOut += item.amount;
                let typeLabel = item.type === 'in' ? '<span style="color:var(--success-color); font-weight:bold;">+ Ø¥ÙŠØ¯Ø§Ø¹</span>' : '<span style="color:var(--danger-color); font-weight:bold;">- Ø³Ø­Ø¨</span>';
                let row = `<tr><td>${typeLabel}</td><td style="font-weight:bold; font-size:1.1rem;">${item.amount.toLocaleString()}</td><td style="color:var(--text-secondary); font-size:0.9rem;">${item.date}</td><td>${item.desc}</td><td><button class="delete-btn" onclick="deleteTransaction('${cat}', ${item.id})">ğŸ—‘</button></td></tr>`;
                tbody.innerHTML += row;
            });
            document.getElementById(`${cat}-in-total`).innerText = totalIn.toLocaleString();
            document.getElementById(`${cat}-out-total`).innerText = totalOut.toLocaleString();
            document.getElementById(`${cat}-balance`).innerText = (totalIn - totalOut).toLocaleString();
            if(document.getElementById(`home-${cat}-balance`)) document.getElementById(`home-${cat}-balance`).innerText = (totalIn - totalOut).toLocaleString() + " Ø¬.Ù…";
        }

        function updateSimpleView(cat) {
            let total = 0;
            let tbody = document.getElementById(`${cat}-table`);
            tbody.innerHTML = '';
            [...appData[cat]].reverse().forEach(item => {
                total += item.amount;
                let row = `<tr><td style="font-weight:bold;">${item.amount.toLocaleString()}</td><td style="color:var(--text-secondary); font-size:0.9rem;">${item.date}</td><td>${item.desc}</td><td><button class="delete-btn" onclick="deleteTransaction('${cat}', ${item.id})">ğŸ—‘</button></td></tr>`;
                tbody.innerHTML += row;
            });
            document.getElementById(`${cat}-total`).innerText = total.toLocaleString() + " Ø¬.Ù…";
            if(cat === 'debts') document.getElementById('home-debts-total').innerText = total.toLocaleString() + " Ø¬.Ù…";
            if(cat === 'credits') document.getElementById('home-credits-total').innerText = total.toLocaleString() + " Ø¬.Ù…";
        }

        function updateSummary() {
            let meezaIn = appData.meeza.filter(i => i.type == 'in').reduce((a, b) => a + b.amount, 0);
            let meezaOut = appData.meeza.filter(i => i.type == 'out').reduce((a, b) => a + b.amount, 0);
            
            let fawryIn = appData.fawry.filter(i => i.type == 'in').reduce((a, b) => a + b.amount, 0);
            let fawryOut = appData.fawry.filter(i => i.type == 'out').reduce((a, b) => a + b.amount, 0);
            
            let incomeTotal = appData.income.reduce((a, b) => a + b.amount, 0);
            let personalTotal = appData.personal.reduce((a, b) => a + b.amount, 0);
            
            let debtsTotal = appData.debts.reduce((a, b) => a + b.amount, 0);
            let creditsTotal = appData.credits.reduce((a, b) => a + b.amount, 0);

            // ØªØ­Ø¯ÙŠØ« Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù„Ø®Øµ
            document.getElementById('sum-income').innerText = incomeTotal.toLocaleString();
            document.getElementById('sum-personal').innerText = personalTotal.toLocaleString();
            
            // Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ø§Ù„Ø¯Ø®Ù„ - Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª)
            let netIncomePersonal = incomeTotal - personalTotal;
            document.getElementById('net-income-personal').innerText = netIncomePersonal.toLocaleString() + " Ø¬.Ù…";
            
            document.getElementById('sum-meeza-balance').innerText = (meezaIn - meezaOut).toLocaleString() + " Ø¬.Ù…";
            document.getElementById('sum-fawry-balance').innerText = (fawryIn - fawryOut).toLocaleString() + " Ø¬.Ù…";
            
            document.getElementById('sum-debts').innerText = debtsTotal.toLocaleString();
            document.getElementById('sum-credits').innerText = creditsTotal.toLocaleString();
        }
    </script>
</body>
</html>
